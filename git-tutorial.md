# Gitチュートリアル

## CI/CDの目的
- 本番反映までの速度を上げることで開発速度の上昇
- 一度の反映は小さくしてバグ修正やコンフリクト修正の労力を極力下げる


## github-flow
<img width="881" alt="github-flow" src="https://github.com/recursion-backend-projects/dev-log/assets/69625901/ac55b22c-00d3-4c0e-af0f-219beb3a7024">

### 採用理由
本番リリースまでの速度が早くCI/CDパイプラインとの相性が良いため。</br>
git-flowはブランチ管理が複雑化しやすいのとmainブランチへのマージハードルが高いため今回はgithub-flowを採用した。


### 基本ルール
GitHub Flowには以下の6つのルールがあり、ルール1が最も重要で、それ以外はルール1を守るために存在する</br>

- 【ルール1】mainブランチは常にデプロイ可能である
- 【ルール2】作業用ブランチをmainから作成する
- 【ルール3】作業用ブランチを定期的にプッシュする
- 【ルール4】プルリクエストを活用する
- 【ルール5】プルリクエストが承認されたらmainへマージする
- 【ルール6】mainへのマージが完了したら直ちにデプロイを行う


### 開発時に気をつけること
**featureブランチでの変更は最小限にする(小さすぎるぐらいで良い)** </br>
上記を守ることで以下のメリットがある</br>
- 影響範囲が小さくなり、バグ修正にも対応しやすい
- コンフリクトが起きにくい
- レビューの労力が下がる
- 頻繁にデプロイができる
- 開発効率の底上げ

## CI/CDフロー図
- 黒字がトリガー
- 赤字は自動化
![CI:CD構成図2](https://github.com/recursion-backend-projects/dev-log/assets/69625901/6b9c38c6-a146-4bc0-94c8-ffb0830f9f9a)

### 詳細
**ステージング**</br>
- feature -> mainブランチへのPRをトリガーにビルド&テスト
- mainブランチの変更をトリガーにしてデプロイ


**本番**
- mainへのタグ付けをトリガーにデプロイ
- タグは現在のバージョンを示す





